#!/bin/bash

iptables -F
iptables -F -t nat
#此两步刷新缓存，大部分情况下可省略。

iptables -P FORWARD DROP
#iptables -A FORWARD -s 20.22.88.166/24 -j ACCEPT
iptables -A FORWARD -s 20.22.88.38/32 -j ACCEPT
iptables -A FORWARD -s 20.22.88.1/32 -j ACCEPT
#iptables -A FORWARD -s 20.20.113.224/32 -j ACCEPT

iptables -A FORWARD -i eth0 -m state --state ESTABLISHED,RELATED -j ACCEPT
#iptables -t nat -A POSTROUTING -o br0 -s 20.22.88.166/24 -j SNAT --to 20.22.88.176
iptables -t nat -A POSTROUTING -o eth0 -s 20.22.88.38/32 -j SNAT --to 20.22.88.62
iptables -t nat -A POSTROUTING -o eth0 -s 20.22.88.1/32 -j SNAT --to 20.22.88.62
#iptables -t nat -A POSTROUTING -o eth0 -s 20.20.113.172/32 -j SNAT --to 20.22.88.62
#iptables -t nat -A POSTROUTING -o br0 -s 20.20.113.224/24 -j SNAT --to 20.20.113.201
