#!/bin/bash

iptables -F
iptables -F -t nat
#此两步刷新缓存，大部分情况下可省略。

#iptables -P FORWARD DROP
#iptables -A FORWARD -s 20.22.88.166/24 -j ACCEPT
#iptables -A FORWARD -s 192.168.0.1/24 -j ACCEPT
#iptables -A FORWARD -s 192.168.0.2/24 -j ACCEPT
#iptables -A FORWARD -i wlan0 -j ACCEPT
#iptables -A FORWARD -o wlan0 -j ACCEPT
iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
iptables -A FORWARD -i wlan0 -o eth0 -m state --state ESTABLISHED,RELATED -j ACCEPT
iptables -A FORWARD -i wlan0 -o eth0 -j ACCEPT
#iptables -t nat -A POSTROUTING -o br0 -s 20.22.88.166/24 -j SNAT --to 20.22.88.176
#iptables -t nat -A POSTROUTING -o eth0 -s 192.168.0.1/24 -j SNAT --to 20.20.113.171
#iptables -t nat -A POSTROUTING -o wlan0 -s 192.168.0.2/24 -j SNAT --to 20.20.113.171
